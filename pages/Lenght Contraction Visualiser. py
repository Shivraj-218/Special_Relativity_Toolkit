mport streamlit as st

from PIL import Image

import numpy as np

from mpmath import mp



# High precision for near-c speeds

mp.dps = 100



# Streamlit config

st.set_page_config(page_title="Length Contraction Simulator", layout="centered")

st.title("ğŸš€ Length Contraction Simulator")



st.markdown("### ğŸ“ Visualizing Length Contraction in Special Relativity")



st.latex(r"""

L = L_0 \sqrt{1 - \frac{v^2}{c^2}} = \frac{L_0}{\gamma}

""")



st.markdown(r"""

- Contraction occurs **only along the direction of motion** (horizontal).Â Â 

- **Height remains unchanged** â€” only the **length along motion** shortens.Â Â 

- \(L_0\) is the proper length (measured at rest), and \(L\) is the contracted length in the moving frame.

""")



# Velocity input

v_input = st.text_input("Enter velocity as a fraction of c (0 < v < 1):", "0.9")



# Image options

st.subheader("Choose an Image")

preset = st.checkbox("Use preset spaceship image")

uploaded_file = st.file_uploader("Or upload your own image (PNG/JPG)", type=["png", "jpg", "jpeg"])



# Load image

if preset:

Â  Â  try:

Â  Â  Â  Â  image = Image.open("spaceship.png").convert("RGBA")

Â  Â  Â  Â  st.success("Using preset spaceship image.")

Â  Â  except FileNotFoundError:

Â  Â  Â  Â  st.error("Missing file: 'spaceship.png'. Please place it in this folder.")

Â  Â  Â  Â  st.stop()

elif uploaded_file:

Â  Â  image = Image.open(uploaded_file).convert("RGBA")

Â  Â  st.success("Using uploaded image.")

else:

Â  Â  st.warning("Please select a preset or upload an image.")

Â  Â  st.stop()



# Velocity validation

try:

Â  Â  v = mp.mpf(v_input.strip())

Â  Â  if v <= 0 or v >= 1:

Â  Â  Â  Â  raise ValueError

except:

Â  Â  st.error("Invalid velocity. Must be a number strictly between 0 and 1.")

Â  Â  st.stop()



# Lorentz contraction calculations

gamma = 1/mp.sqrt(1 - v**2)

contracted_fraction = 1/gamma

contraction_percent = (1 - contracted_fraction)*100



# Resize image horizontally only

orig_w, orig_h = image.size

new_w = int(orig_w * float(contracted_fraction))

contracted_image = image.resize((new_w, orig_h), Image.BICUBIC)

# Display results (vertical stack)

st.subheader("Results")



# Cap the original width for layout purposes

max_orig_width = 600

scale = min(max_orig_width / orig_w, 1.0)

disp_orig_w = int(orig_w * scale)

disp_new_wÂ  = int(new_wÂ  * scale)



# Original image

st.image(

Â  Â  image,

Â  Â  caption=f"Original (Rest Frame) â€“ {orig_w}px",

Â  Â  width=disp_orig_w

)



# Extraâ€‘large vertical gap

st.markdown("<div style='height:100px'></div>", unsafe_allow_html=True)



st.markdown("**Contracted image is:**")



# Contracted image

st.image(

Â  Â  contracted_image,

Â  Â  width=disp_new_w

)



# Separator

st.markdown("---")



# Summary

st.markdown(f"""

### ğŸ“‰ Contraction Summary

- **Lorentz Factor (Î³)**: `{mp.nstr(gamma, 20)}`Â Â 

- **Original Width**: `{orig_w}px`Â Â 

- **Contracted Width**: `{new_w}px`Â Â 

- **Contraction Fraction**: `{float(contracted_fraction):.5f}`Â Â 

- **Contraction**: `{float(contraction_percent):.2f}%`Â Â 

- **Direction**: Horizontal only (length parallel to motion)

""")



st.markdown("""

<hr style='margin-top: 50px; margin-bottom: 10px'>



<div style='text-align: center; font-size: 14px; color: gray;'>

&copy; 2025 Shivraj Deshmukh â€” All Rights Reserved<br>

Created with â¤ï¸ using Streamlit

</div>

""", unsafe_allow_html=True) check the correctness of the code
